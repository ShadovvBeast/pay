# Settings for Backend (on Cloud Run).
runConfig:
  minInstances: 0
  maxInstances: 10
  concurrency: 80
  cpu: 1
  memoryMiB: 512

# Build configuration - use Dockerfile in backend directory
build:
  rootDirectory: backend

# Environment variables and secrets.
env:
  # Database configuration
  - variable: DATABASE_URL
    secret: SB0PAY_DATABASE_URL
  
  # AllPay API configuration
  - variable: ALLPAY_API_URL
    secret: ALLPAY_API_URL
  - variable: ALLPAY_LOGIN
    secret: ALLPAY_LOGIN
  - variable: ALLPAY_API_KEY
    secret: ALLPAY_API_KEY
  
  # JWT configuration
  - variable: JWT_SECRET
    secret: JWT_SECRET
  
  # Server configuration
  - variable: PORT
    value: "8080"
    availability:
      - RUNTIME
  - variable: NODE_ENV
    value: production
    availability:
      - BUILD
      - RUNTIME
  - variable: FRONTEND_URL
    value: https://pay.sb1labs.com
    availability:
      - RUNTIME
  - variable: CORS_ORIGIN
    value: https://pay.sb1labs.com
    availability:
      - RUNTIME
